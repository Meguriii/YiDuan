<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.business.mapper.BizAddrMapper">
    
    <resultMap type="BizAddr" id="BizAddrResult">
        <result property="addrId"    column="addr_id"    />
        <result property="clientId"    column="client_id"    />
        <result property="addrName"    column="addr_name"    />
        <result property="addrTel"    column="addr_tel"    />
        <result property="addrProv"    column="addr_prov"    />
        <result property="addrCity"    column="addr_city"    />
        <result property="addrDist"    column="addr_dist"    />
        <result property="addrDetail"    column="addr_detail"    />
        <result property="isDefault"    column="is_default"    />
        <result property="createdAt"    column="created_at"    />
        <result property="updatedAt"    column="updated_at"    />
    </resultMap>

    <sql id="selectBizAddrVo">
        select addr_id, client_id, addr_name, addr_tel, addr_prov, addr_city, addr_dist, addr_detail, is_default, created_at, updated_at from biz_addr
    </sql>

    <select id="selectBizAddrList" parameterType="BizAddr" resultMap="BizAddrResult">
        <include refid="selectBizAddrVo"/>
        <where>  
            <if test="clientId != null  and clientId != ''"> and client_id = #{clientId}</if>
            <if test="addrName != null  and addrName != ''"> and addr_name like concat('%', #{addrName}, '%')</if>
            <if test="addrTel != null  and addrTel != ''"> and addr_tel = #{addrTel}</if>
            <if test="addrProv != null  and addrProv != ''"> and addr_prov = #{addrProv}</if>
            <if test="addrCity != null  and addrCity != ''"> and addr_city = #{addrCity}</if>
            <if test="addrDist != null  and addrDist != ''"> and addr_dist = #{addrDist}</if>
            <if test="addrDetail != null  and addrDetail != ''"> and addr_detail = #{addrDetail}</if>
            <if test="isDefault != null "> and is_default = #{isDefault}</if>
            <if test="createdAt != null "> and created_at = #{createdAt}</if>
            <if test="updatedAt != null "> and updated_at = #{updatedAt}</if>
        </where>
    </select>
    
    <select id="selectBizAddrByAddrId" parameterType="String" resultMap="BizAddrResult">
        <include refid="selectBizAddrVo"/>
        where addr_id = #{addrId}
    </select>

    <insert id="insertBizAddr" parameterType="BizAddr" useGeneratedKeys="true" keyProperty="addrId">
        insert into biz_addr
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="clientId != null and clientId != ''">client_id,</if>
            <if test="addrName != null and addrName != ''">addr_name,</if>
            <if test="addrTel != null and addrTel != ''">addr_tel,</if>
            <if test="addrProv != null and addrProv != ''">addr_prov,</if>
            <if test="addrCity != null and addrCity != ''">addr_city,</if>
            <if test="addrDist != null and addrDist != ''">addr_dist,</if>
            <if test="addrDetail != null and addrDetail != ''">addr_detail,</if>
            <if test="isDefault != null">is_default,</if>
            <if test="createdAt != null">created_at,</if>
            <if test="updatedAt != null">updated_at,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="clientId != null and clientId != ''">#{clientId},</if>
            <if test="addrName != null and addrName != ''">#{addrName},</if>
            <if test="addrTel != null and addrTel != ''">#{addrTel},</if>
            <if test="addrProv != null and addrProv != ''">#{addrProv},</if>
            <if test="addrCity != null and addrCity != ''">#{addrCity},</if>
            <if test="addrDist != null and addrDist != ''">#{addrDist},</if>
            <if test="addrDetail != null and addrDetail != ''">#{addrDetail},</if>
            <if test="isDefault != null">#{isDefault},</if>
            <if test="createdAt != null">#{createdAt},</if>
            <if test="updatedAt != null">#{updatedAt},</if>
         </trim>
    </insert>

    <update id="updateBizAddr" parameterType="BizAddr">
        update biz_addr
        <trim prefix="SET" suffixOverrides=",">
            <if test="clientId != null and clientId != ''">client_id = #{clientId},</if>
            <if test="addrName != null and addrName != ''">addr_name = #{addrName},</if>
            <if test="addrTel != null and addrTel != ''">addr_tel = #{addrTel},</if>
            <if test="addrProv != null and addrProv != ''">addr_prov = #{addrProv},</if>
            <if test="addrCity != null and addrCity != ''">addr_city = #{addrCity},</if>
            <if test="addrDist != null and addrDist != ''">addr_dist = #{addrDist},</if>
            <if test="addrDetail != null and addrDetail != ''">addr_detail = #{addrDetail},</if>
            <if test="isDefault != null">is_default = #{isDefault},</if>
            <if test="createdAt != null">created_at = #{createdAt},</if>
            <if test="updatedAt != null">updated_at = #{updatedAt},</if>
        </trim>
        where addr_id = #{addrId}
    </update>

    <delete id="deleteBizAddrByAddrId" parameterType="String">
        delete from biz_addr where addr_id = #{addrId}
    </delete>

    <delete id="deleteBizAddrByAddrIds" parameterType="String">
        delete from biz_addr where addr_id in 
        <foreach item="addrId" collection="array" open="(" separator="," close=")">
            #{addrId}
        </foreach>
    </delete>
</mapper>